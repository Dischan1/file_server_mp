# file_server_mp
multi-platform file server for Windows/Linux
 
## About
it is a simple multi-platform file server, it can send and receive single files between different platforms (Windows/Linux).
it has a RSA cryptography and a client identifications is a unique random numbers, generated by client. 
These keys are install on the server-side. Them are need to be placed in the root directory where the executable server is located. You need to move both keys there.

## Usage
### Server
```
server <port>
```
`port` - port for accepting a remote connections

### Client
```
client <ip> <port> <passphrase> [r/t] <from> <to>
client <ip> <port> <passphrase> l <path>
client <ip> <port> <passphrase> m <message>
client <ip> <port> <passphrase> g
```
`ip`        - remote server ip for connection  
`port`      - remote server port for connection  
`passphrase`- your a secret phrase for connection  
`r/t`       - file transfer direction (receive - receiving a file from a server/transmit - transmitting a file to a server)  
`l`         - listing a directory from remote server  
`m`         - message for a server  
`g`         - register on a server  
`from`      - source directory from a server on receive or source directory from a client on transmit  
`to`        - destination directory for a client on receive or destination directory for a server on transmit  
`path`      - a directory from remote server  
  
`path`, `from` and `to` paths are relative by default

## Client GUI
it was developer to make it easier to use the windows program.  
  
![image](https://user-images.githubusercontent.com/57231832/205509064-ea615bba-bf47-462b-b544-2b437bb4e648.png)  
  
`ip port` and `passphrase` are mandatory. group of `path` and `receive` items are used for server directory listing, `message` and `send` are used for send a message to the server, `source`, `destination` and `receive`, `transmit` are used to download and upload files respectively.

## Wireshark traffic sniffing
this project uses the RSA algorithm to encrypt traffic and its own TLS/SSL wrapper that does not transfer private keys over the network, so it was decided to get the keys from the network units physically.
### How to capture and decrypt traffic
1. download `foo_sniffer.lua`, edit port `12345` to your own port and drop it to wireshark/scripts folder (create a new one)  
2. edit init.lua in wireshark root folder and add lines from attachments to the end
after starting the wireshark application, the packets will be captured in \\Wireshark\\scripts\\packets  
3. run the tshark command `tshark -D` to list availabile network interfaces  
4. run the tshark command `tshark -i <\\Loopback>` to start sniffing. packets are now captured  
5. run the sniffer command `sniffer <packets_path>` to start decrypting. packets are now decrypted  
6. enjoy sniffing user data and decrypting it!  
### Attachments
```
FOOPROTO_SCRIPT_PATH = "C:\\path\\to\\Wireshark\\scripts\\"
dofile(FOOPROTO_SCRIPT_PATH .. "foo_sniffer.lua")
```  
